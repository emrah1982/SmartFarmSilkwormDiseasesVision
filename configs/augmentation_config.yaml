# Strawberry Vision - Augmentation Configuration

# Albumentations augmentation pipeline
albumentations:
  enabled: true
  
  transforms:
    # Color augmentations
    - name: RandomBrightnessContrast
      params:
        brightness_limit: 0.2
        contrast_limit: 0.2
        p: 0.5
    
    - name: HueSaturationValue
      params:
        hue_shift_limit: 10
        sat_shift_limit: 20
        val_shift_limit: 20
        p: 0.5
    
    - name: RGBShift
      params:
        r_shift_limit: 15
        g_shift_limit: 15
        b_shift_limit: 15
        p: 0.3
    
    # Noise and blur
    - name: GaussNoise
      params:
        var_limit: [10.0, 50.0]
        p: 0.3
    
    - name: GaussianBlur
      params:
        blur_limit: [3, 5]
        p: 0.3
    
    - name: MotionBlur
      params:
        blur_limit: 5
        p: 0.2
    
    # Geometric transformations
    - name: RandomRotate90
      params:
        p: 0.5
    
    - name: ShiftScaleRotate
      params:
        shift_limit: 0.1
        scale_limit: 0.15
        rotate_limit: 15
        border_mode: 0
        p: 0.5
    
    # Weather and lighting
    - name: RandomShadow
      params:
        shadow_roi: [0, 0.5, 1, 1]
        num_shadows_lower: 1
        num_shadows_upper: 2
        shadow_dimension: 5
        p: 0.3
    
    - name: RandomSunFlare
      params:
        flare_roi: [0, 0, 1, 0.5]
        angle_lower: 0
        angle_upper: 1
        num_flare_circles_lower: 6
        num_flare_circles_upper: 10
        p: 0.2

# Roboflow augmentation settings (for online augmentation)
roboflow:
  enabled: true
  
  preprocessing:
    auto_orient: true
    resize:
      width: 640
      height: 640
      format: "Stretch to"
  
  augmentation:
    flip_horizontal: 0.5
    flip_vertical: 0.0
    rotation: 15
    brightness: 20
    exposure: 15
    blur: 1.0
    noise: 2.0
    cutout:
      enabled: true
      boxes: 3
      percent: 0.05
    mosaic: false
    
  outputs_per_training_example: 3  # Generate 3 augmented versions per image

# Custom augmentation for strawberry-specific scenarios
custom:
  # Simulate different lighting conditions (greenhouse, outdoor, shadow)
  lighting_scenarios:
    - name: greenhouse
      brightness_range: [0.8, 1.2]
      saturation_range: [0.9, 1.1]
      hue_shift: 5
    
    - name: outdoor_sunny
      brightness_range: [1.1, 1.3]
      saturation_range: [1.1, 1.3]
      hue_shift: -5
    
    - name: shadow
      brightness_range: [0.5, 0.8]
      saturation_range: [0.8, 1.0]
      hue_shift: 0
  
  # Simulate occlusion (leaves, other strawberries)
  occlusion:
    enabled: true
    probability: 0.3
    max_occluders: 2
    occluder_size_range: [0.1, 0.3]
  
  # Simulate different ripeness transitions
  ripeness_augmentation:
    enabled: true
    # Slightly shift colors to simulate ripeness stages
    ripe_to_semi:
      saturation_factor: 0.85
      value_factor: 0.9
    semi_to_unripe:
      hue_shift: 10
      saturation_factor: 0.7
